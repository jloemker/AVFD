# AVFD

## Single bin analysis
1. The ```convert_tree_splitFiles.C``` converts text data generated by AVFD to root readable files. Excute this piece code by typing
```
aliroot convert_tree_splitFiles.C
```
2. After getting the root file, one can run the actual analysis work, which is included in five files:
```
Event.h Particle.h CalculateFlowCME.cxx CalculateFlowCME.h runSingleCentrality.C
```
Event.h and Particle.h are two basic classes which store the information of particle tracks and should not be changed.
Inside runSingleCentrality.C, you have to specify the centrality bin that you want to analyze. 
```
Int_t centID = 0; //0: 0-5%, 1: 5-10%, 2: 10-20%, 3: 20-30%, 4: 30-40%, 5: 40-50%, 6: 50-60%, 7: 60-70%
```
To run the analysis, one has to first compile ```CalculateFlowCME.cxx``` followed by compiling ```runSingleCentrality.C``` under aliroot environment. 
Then, one has to put the right directory which stores the root data in this variable:
```
directory = Form("/dcache/alice/shiqiu/2020_AVFD_2.76TeV/Baseline/tree_Baseline_Cent%d_%d_%d.root", (centID)*5, (centID+1)*5, k);
```
First, one gets into aliroot environment by typing:
```
aliroot
```
Then, one types:
```
.x CalculateFlowCME.cxx++
.x runSingleCentrality.C++
```

## Full analysis
The current directories in the ```convert_tree_splitFile.C``` and ```runSingleCentrality.C``` are set to perform the whole analysis steps (in batch mode) in the data directory.
One can specify the centrality bin(s) within the the ```submit.sh``` and instead of the previous compiling steps the whole analysis can be run by typing:
```
source submit.sh
```
When the jobs are done the results are stored in the directory specified in ```runSingleCentrality.C```. The root files from all centralities can be merged in the root environment via:
```
hadd outputfilename.root inputfiles
```
The output can then be analysed with the macro(s) in ```/plots```.
